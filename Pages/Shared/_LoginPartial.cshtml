@using Microsoft.AspNetCore.Identity
@using NLI_POS.Models
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@* <ul class="navbar-nav ms-auto text-light ps-3"> *@
<ul class="nav flex-column mb-auto">
    @if (SignInManager.IsSignedIn(User))
    {
        <li class="nav-item">
            <a class="nav-link d-flex justify-content-between align-items-center" style="color:aquamarine"
               data-bs-toggle="collapse"
               href="#userMenu"
               role="button"
               aria-expanded="false"
               title="Click here to manage account or logout.">
                @{
                    var fullName = User.FindFirst("FullName")?.Value;
                    var nameLength = fullName?.Length ?? 0;
                    var spanClass = nameLength > 13 ? "small" : "";
                }
                <span class="@spanClass">
                    <span class="icon-container">
                        <i class="fas fa-user-circle fa-xl me-2 "></i>
                    </span>
                    Hello @User.FindFirst("FullName")?.Value!
                </span>
                <i class="fas fa-chevron-down small"></i>
            </a>
            <div class="collapse ps-4" id="userMenu">
                <a class="nav-link text-white" asp-area="Identity" asp-page="/Account/Manage/Index">
                    <span class="icon-container"><i class="fas fa-user-cog"></i></span> Manage Account
                </a>
                <a class="nav-link text-white" href="~/Identity/Account/Logout?returnUrl=@Url.Page("/Index", new { area = "" })" >
                    <span class="icon-container"><i class="fas fa-sign-out-alt me-2"></i></span> Logout
                </a>
            </div>
        </li>


    }
    else
    {
        @* <li class="nav-item">
            <a class="nav-link " asp-area="Identity" asp-page="/Account/Register" title="Register"><i class="fas fa-user-plus fa-xl" title="Register"></i>  <span class="d-sm-none d-lg-inline-block"> Register</span> </a>
        </li> *@
        <li class="nav-item">
            <a class="nav-link " asp-area="Identity" asp-page="/Account/Login" title="Login" ><i class="fas fa-sign-in-alt fa-xl" title="Login"></i>  <span class="d-sm-none d-lg-inline-block"> Login</span></a>
        </li>
    }
</ul>
