@model NLI_POS.Pages.Inventory.Office.IndexModel.ConvertInventoryModel


<form method="post" asp-page-handler="Convert" id="convertForm">

    @Html.AntiForgeryToken()

    <div class="modal-header">
        <h5 class="modal-title"><i class="fas fa-random me-2"></i>Convert</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
    </div>

    <div class="modal-body">

        <input type="hidden" asp-for="FromProductId" />
        <input type="hidden" asp-for="LocationId" />

        <input type="hidden"
               id="ConversionQty"
               value="@Model.ConversionQty" />

        <input type="hidden"
               id="ResultQty"
               class="form-control"
               value="@Model.ResultQty"
               readonly />

        <input type="hidden"
               id="convProdName"
               value="@Model.ConvertedProductName" />

        <input type="hidden" asp-for="FromProductName" value="@Model.FromProductName" />
        <input type="hidden" asp-for="ConvertedProductName" value="@Model.ConvertedProductName" />

        <div class="mb-3 row">
            <div class="col-6">
                <label class="form-label">Quantity to Convert (Boxes)</label>
                <input id="ConvertQty" asp-for="ConvertQty"
                       type="number"
                       min="1"
                       class="form-control"
                       required />
            </div>
            <div class="col-6">
                <div class="alert alert-info mb-3">
                    <strong>Conversion Result:</strong><br />
                    @Model.FromProductName →
                    <span id="ResultInfo" class="fw-bold text-success">
                        @Model.ResultQty @Model.ConvertedProductName
                    </span>
                </div>
            </div>
        </div>

    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-secondary"
                data-bs-dismiss="modal">
            <i class="fas fa-times me-2"></i> Cancel
        </button>

        <button type="submit" class="btn btn-success">
            <i class="fas fa-random me-2"></i> Convert
        </button>
    </div>

</form>

<script>
    const qtyInput = document.getElementById('ConvertQty');    
    const resultSpan = document.getElementById('ResultInfo');
    const resultInput = document.getElementById('ResultQty');
    const conversionQty = parseFloat(document.getElementById('ConversionQty').value);
    const productName = document.getElementById('convProdName').value;

qtyInput.addEventListener('input', () => {
    const qty = parseFloat(qtyInput.value) || 0;
    const result = qty * conversionQty;
    resultSpan.textContent = result + ' ' + productName;
});
</script>