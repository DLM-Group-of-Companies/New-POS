@page
@using System.Text.Json
@model NLI_POS.Pages.Products.CreateModel

@{
    ViewData["Title"] = "New Product";
}

<div class="container bg-white shadow rounded-4 p-4 my-4" style="max-width: 900px;">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="mb-0"><i class="fas fa-box-open text-primary me-2"></i> New Product</h4>
        <a title="Close" class="text-danger fa-2xl" style="cursor: pointer;" onclick="window.location = './Index';">
            <i class="fas fa-window-close"></i>
        </a>
    </div>

    <hr />

    <form method="post" onsubmit="return validateAndShowLoader(this)">
        <div asp-validation-summary="ModelOnly" class="text-danger small mb-3"></div>

        <div class="row g-3">
            <div class="col-md-4">
                <label class="form-label d-block">Product Class</label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="ProductClassInput" id="MainClass" value="Main"
                    @(Model.ProductClassInput == "Main" ? "checked" : "") />
                    <label class="form-check-label" for="MainClass">Main</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="ProductClassInput" id="CollateralClass" value="Collateral"
                    @(Model.ProductClassInput == "Collateral" ? "checked" : "") />
                    <label class="form-check-label" for="CollateralClass">Collateral</label>
                </div>
            </div>
            <div class="col-md-4">
                <label asp-for="Products.ProductType" class="form-label"></label>
                <select asp-for="Products.ProductType" class="form-select" asp-items="ViewBag.ProductType">
                    <option value="">Select</option>
                </select>
                <span asp-validation-for="Products.ProductType" class="text-danger small"></span>
            </div>

            <div class="col-md-4">
                <label asp-for="Products.ProductCategory" class="form-label"></label>
                <select asp-for="Products.ProductCategory" id="ProductCategory" class="form-select">
                    <option value="">Select</option>
                    <option value="Regular">Regular</option>
                    <option value="Promo">Promo</option>
                    <option value="Freebie">Freebie</option>
                </select>
                <span asp-validation-for="Products.ProductCategory" class="text-danger small"></span>
            </div>
            <div class="col-md-4">
                <label asp-for="Products.ProductCode" class="form-label"></label>
                <input asp-for="Products.ProductCode" class="form-control" />
                <span asp-validation-for="Products.ProductCode" class="text-danger small"></span>
            </div>
            <div class="col-md-8">
                <label asp-for="Products.ProductName" class="form-label"></label>
                <input asp-for="Products.ProductName" class="form-control" />
                <span asp-validation-for="Products.ProductName" class="text-danger small"></span>
            </div>

            <div class="col-12">
                <label asp-for="Products.ProductDescription" class="form-label"></label>
                <input asp-for="Products.ProductDescription" class="form-control" />
                <span asp-validation-for="Products.ProductDescription" class="text-danger small"></span>
            </div>

@*             <div class="col-md-6">
                <label asp-for="Products.SKU" class="form-label"></label>
                <input asp-for="Products.SKU" class="form-control" />
                <span asp-validation-for="Products.SKU" class="text-danger small"></span>
            </div> *@

            <!-- PRODUCT PRICING -->
            <hr class="my-4" />

            <div class="row g-2">
                <div class="col-md-9">
                    <h5 class="text-secondary"><i class="fas fa-tags me-2"></i>Product Price Details</h5>
                </div>
                <div class="col-md-3">
                    <div class="d-flex align-items-center gap-2">
                        <i class="fas fa-globe-asia fa-lg text-secondary" title="Country"></i>
                        <select asp-for="ProductPrice.CountryId" class="form-select"
                                asp-items="@(new SelectList(Model.Countries, "Id", "Name"))">
                            <option value="">Select Country</option>
                        </select>
                    </div>
                    <span asp-validation-for="ProductPrice.CountryId" class="text-danger small"></span>
                </div>
            </div>

            <div class="row g-2 mt-2">
                <div class="col-md-3">
                    <label asp-for="ProductPrice.UnitCost" class="form-label"></label>
                    <input asp-for="ProductPrice.UnitCost" class="form-control" />
                </div>
                <div class="col-md-3">
                    <label asp-for="ProductPrice.RegPrice" class="form-label"></label>
                    <input asp-for="ProductPrice.RegPrice" class="form-control" />
                    <span asp-validation-for="ProductPrice.RegPrice" class="text-danger small"></span>
                </div>
                <div class="col-md-3">
                    <label asp-for="ProductPrice.DistPrice" class="form-label"></label>
                    <input asp-for="ProductPrice.DistPrice" class="form-control" />
                    <span asp-validation-for="ProductPrice.DistPrice" class="text-danger small"></span>
                </div>
                <div class="col-md-3">
                    <label asp-for="ProductPrice.StaffPrice" class="form-label"></label>
                    <input asp-for="ProductPrice.StaffPrice" class="form-control" />
                    <span asp-validation-for="ProductPrice.StaffPrice" class="text-danger small"></span>
                </div>
            </div>

            <div class="row g-2 mt-2">
                <div class="col-md-3">
                    <label asp-for="ProductPrice.BPPPrice" class="form-label"></label>
                    <input asp-for="ProductPrice.BPPPrice" class="form-control" />
                    <span asp-validation-for="ProductPrice.BPPPrice" class="text-danger small"></span>
                </div>
                <div class="col-md-3">
                    <label asp-for="ProductPrice.MedPackPrice" class="form-label"></label>
                    <input asp-for="ProductPrice.MedPackPrice" class="form-control" />
                    <span asp-validation-for="ProductPrice.MedPackPrice" class="text-danger small"></span>
                </div>
                <div class="col-md-3">
                    <label asp-for="ProductPrice.CorpAccPrice" class="form-label"></label>
                    <input asp-for="ProductPrice.CorpAccPrice" class="form-control" />
                    <span asp-validation-for="ProductPrice.CorpAccPrice" class="text-danger small"></span>
                </div>
                <div class="col-md-3">
                    <label asp-for="ProductPrice.NaturoPrice" class="form-label"></label>
                    <input asp-for="ProductPrice.NaturoPrice" class="form-control" />
                    <span asp-validation-for="ProductPrice.NaturoPrice" class="text-danger small"></span>
                </div>
            </div>

            <hr />
            <!-- Active Switch & Hidden Fields -->
            <div class="row g-2 mt-2 align-items-center">
                <div class="col-md-4">
                    <div class="form-group form-check form-switch">
                        <label class="form-check-label">
                            <input class="form-check-input" asp-for="Products.IsActive" /> Active
                        </label>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group form-check form-switch">
                        <label class="form-check-label">
                            <input class="form-check-input" asp-for="Products.isFreebieAvailable" style="accent-color: green;" /> Freebie Available
                        </label>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group form-check form-switch">
                        <label class="form-check-label">
                            <input class="form-check-input" asp-for="Products.isStaffAvailable" /> Staff Available
                        </label>
                    </div>
                </div>
            </div>

        </div>

        <input asp-for="Products.EncodeDate" type="hidden" value="@DateTime.UtcNow.AddHours(8)" />
        <input asp-for="Products.EncodedBy" type="hidden" value="@User.Identity?.Name" />

        <div class="mt-4">
            <button type="submit" class="btn btn-primary">
                <i class="far fa-save me-1"></i> Save
            </button>
        </div>
    </form>
</div>

@section Scripts {
    @await Html.PartialAsync("_ValidationScriptsPartial")
}
