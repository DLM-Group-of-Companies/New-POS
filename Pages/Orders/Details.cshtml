@page
@model NLI_POS.Pages.Orders.DetailsModel

@{
    ViewData["Title"] = "Order Details";
}
<div class="container bg-white bg-gradient rounded-4 shadow p-4 ">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="text-primary"><i class="fas fa-file-invoice me-2"></i> Order Details</h4>
        <i class="fas fa-times fa-lg text-danger cursor-pointer" title="Close" onclick="window.location = './Index';"></i>
    </div>
    <hr />
    <div class="row">
        <div class="col-sm-6 form-group">
            <span class="form-label">@Html.DisplayNameFor(model => model.Order.OrderNo)</span>
            <span class="form-control">@Html.DisplayFor(model => model.Order.OrderNo)</span>
        </div>
        <div class="col-sm-3 form-group">
            @Html.DisplayNameFor(model => model.Order.OrderDate)
            <span class="form-control">@Html.DisplayFor(model => model.Order.OrderDate)</span>
        </div>
        <div class="col-sm-3">
            @Html.DisplayNameFor(model => model.Order.Office)
            <span class="form-control">@Html.DisplayFor(model => model.Order.Office.Name)</span>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-9">
            Customer
            <span class="form-control">@Html.DisplayFor(model => model.Order.Customers.CustCode) | @Html.DisplayFor(model => model.Order.Customers.FirstName) @Html.DisplayFor(model => model.Order.Customers.LastName)</span>
        </div>
        <div class="col-sm-3">
            @Html.DisplayNameFor(model => model.Order.Customers.CustClass)
            <span class="form-control">@Html.DisplayFor(model => model.Order.Customers.CustClasses.Name) </span>
        </div>
    </div>

    <div>
        <br />
        <partial name="_OrderDetailsPartial" model="Model.OrderList"></partial>
    </div>

    <div class="row p-3">
        @Html.DisplayNameFor(model => model.Order.Notes)
        <textarea class="form-control" asp-for="Order.Notes" rows="3" readonly></textarea>
    </div>
    <div class="row">
        <div class="col-6">
            <a class="btn btn-primary bg-gradient" asp-page="./Index"><i class="fas fa-chevron-circle-left"></i> Back to List</a>
        </div>
        <div class="col-6 text-end">
            <a class="btn btn-success bg-gradient" data-bs-toggle="modal" data-bs-target="#printReceipt"><i class="fas fa-eye"></i> View Receipt</a>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="printReceipt" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="printReceiptLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="printReceiptLabel">Receipt</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row pb-3">
                    <div class="col-9">
                        <img src="~/images/nli-logo.png" width="200px" /><br />
                        <h5>We care for you <i>naturally</i>!</h5><br />
                        <span class="fw-bold">PURCHASE ORDER #: @Model.Order.OrderNo</span><br />
                        <span> DATE: @Model.Order.OrderDate.ToString("MMMM dd, yyyy")</span><br />
                        <span> CUSTOMER: @Model.Order.Customers.FirstName @Model.Order.Customers.LastName </span><br />
                    </div>
                    <div class="col-3 small justify-content-end">
                        <span class="small"> Address: @Model.Order.Office.Address </span><br />
                        <span class="small"> Email: @Model.Order.Office.Email</span><br />
                        <span class="small"> Contact No: @Model.Order.Office.ContactNo</span>
                    </div>
                </div>


                        <partial name="_OrderDetailsPartial" model="Model.OrderList"></partial>

                <div class="row">
                    <div class="col-8 small"><span class="small fst-italic">NOTE: This is a computer generated purchase order, hence no signature is required.</span></div>
                    <div class="col-4 text-end">CASHIER: @User.FindFirst("FullName")?.Value</div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="fas fa-chevron-left"></i> Close</button>
                <button type="button" class="btn btn-info" onclick="printModal();"><i class="fas fa-print"></i> Print</button>
                <button type="button" class="btn btn-success" onclick="emailModal()"><i class="fas fa-paper-plane"></i> Email</button>
            </div>
        </div>
    </div>

</div>
